<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Nutri√ß√£o Hospitalar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --base-font-size: 16px;
            --primary-color: #1A73E8;
            --primary-hover-color: #1765CC;
            --correct-color: #188038;
            --correct-bg-color: #E6F4EA;
            --incorrect-color: #D93025;
            --incorrect-bg-color: #FCE8E6;
            --neutral-bg-color: #f1f3f4;
            --text-color: #202124;
            --light-text-color: #5f6368;
            --border-color: #dadce0;
            --card-bg-color: #ffffff;
            --shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 2px 6px 2px rgba(60,64,67,0.15);
            --sidebar-width: 300px;
        }

        html {
            font-size: var(--base-font-size);
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Google Sans', 'Roboto', sans-serif;
            background-color: var(--neutral-bg-color);
            margin: 0;
            display: flex;
            color: var(--text-color);
        }

        /* --- Sidebar --- */
        #sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background-color: var(--card-bg-color);
            position: fixed;
            top: 0;
            left: 0;
            padding: 1.25rem;
            box-sizing: border-box;
            overflow-y: auto;
            transition: transform 0.3s ease-in-out;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            border-top-right-radius: 1rem;
            border-bottom-right-radius: 1rem;
            z-index: 2000;
        }

        #sidebar h2 {
            font-size: 1.5rem;
            color: var(--text-color);
            margin-top: 0;
            margin-bottom: 1.25rem;
            padding-bottom: 0.625rem;
            border-bottom: 1px solid var(--border-color);
        }

        #sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #sidebar nav li a {
            display: block;
            padding: 0.75rem 1rem;
            text-decoration: none;
            color: var(--light-text-color);
            font-weight: 500;
            border-radius: 1.5rem;
            transition: background-color 0.2s ease, color 0.2s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #sidebar nav li a:hover, #sidebar nav li a.active {
            background-color: #E8F0FE;
            color: var(--primary-color);
        }
        
        #sidebar .submenu {
            padding-left: 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
        }

        #sidebar .submenu.open {
            max-height: 30rem;
        }
        
        #sidebar .has-submenu > a {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #sidebar .arrow {
            border: solid var(--light-text-color);
            border-width: 0 2px 2px 0;
            display: inline-block;
            padding: 3px;
            transform: rotate(45deg);
            transition: transform 0.3s, border-color 0.3s;
        }
        
        #sidebar .has-submenu > a:hover .arrow, #sidebar .has-submenu > a.active .arrow {
             border-color: var(--primary-color);
        }
        
        #sidebar .has-submenu.open > a .arrow {
            transform: rotate(-135deg);
        }

        /* --- Main Content --- */
        .page-content {
            margin-left: var(--sidebar-width);
            width: calc(100% - var(--sidebar-width));
            padding: 1.25rem;
            padding-top: 5rem;
        }
        
        .content-section { display: none; animation: fadeIn 0.5s ease; }
        .content-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #header-container {
            width: calc(100% - var(--sidebar-width));
            background-color: rgba(241, 243, 244, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            padding: 0 1.5rem;
            box-sizing: border-box;
            border-bottom: 1px solid var(--border-color);
            transition: width 0.3s ease-in-out, left 0.3s ease-in-out;
        }

        #timer, #score-counter {
            font-size: 1rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 1.5rem;
            transition: all 0.3s ease;
        }
        
        #timer { color: var(--primary-color); background-color: #E8F0FE; }
        #score-counter { color: var(--correct-color); background-color: var(--correct-bg-color); }

        #font-controls {
            display: flex;
            align-items: center;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        #font-controls button {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--light-text-color);
            font-weight: bold;
            width: 2.25rem;
            height: 2.25rem;
            border-radius: 50%;
            cursor: pointer;
            margin: 0 0.25rem;
            transition: background-color 0.2s, color 0.2s;
        }

        #font-controls button:hover {
            background-color: #E8F0FE;
            color: var(--primary-color);
        }

        .main-content-wrapper {
            width: 100%;
            max-width: 850px;
            margin: 0 auto;
        }

        h1 { text-align: center; color: var(--text-color); font-size: 2.5rem; font-weight: 700; margin-bottom: 0.625rem; }

        h3 { text-align: center; color: var(--light-text-color); font-size: 1.5rem; font-weight: 400; margin-top: 2.5rem; margin-bottom: 1.25rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.625rem; }

        .question-container { background: var(--card-bg-color); border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--shadow); border: 1px solid transparent; transition: box-shadow 0.3s ease; }

        .question { font-weight: 500; font-size: 1.2rem; margin-bottom: 1.25rem; color: var(--text-color); line-height: 1.6; }

        .options label { display: flex; align-items: center; margin: 0.625rem 0; padding: 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; line-height: 1.5; }

        .options label:hover { background: var(--neutral-bg-color); border-color: #c4c8cc; }

        .options input { margin-right: 0.75rem; width: 1.125rem; height: 1.125rem; accent-color: var(--primary-color); }

        .correct { background: var(--correct-bg-color) !important; border-color: var(--correct-color) !important; font-weight: 500; }
        .incorrect { background: var(--incorrect-bg-color) !important; border-color: var(--incorrect-color) !important; font-weight: 500; }

        button.quiz-button { display: block; width: 220px; margin: 1.5rem auto 0; padding: 0.75rem 1.25rem; background: var(--primary-color); color: white; border: none; border-radius: 0.5rem; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease, transform 0.2s ease; }

        button.quiz-button:disabled { background: #bdbdbd; cursor: not-allowed; transform: none; }
        button.quiz-button:hover:not(:disabled) { background: var(--primary-hover-color); transform: translateY(-2px); }

        .feedback { margin-top: 1.25rem; font-size: 1rem; line-height: 1.7; background: #f1f3f4; padding: 1.25rem; border-radius: 0.5rem; border-left: 4px solid var(--border-color); animation: slideDown 0.4s ease; }
        
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .feedback .correct-feedback::before { content: '‚úÖ '; }
        .feedback .incorrect-feedback::before { content: '‚ùå '; }

        #final-score { text-align: center; font-size: 1.5rem; color: var(--text-color); margin: 1.25rem 0; background: var(--card-bg-color); padding: 1.5rem; border-radius: 0.75rem; display: none; box-shadow: var(--shadow); }
        #final-score span { font-weight: 700; color: var(--primary-color); }
        
        #menu-toggle { display: none; }

        /* --- Responsive Design --- */
        @media (max-width: 1024px) {
            #sidebar { transform: translateX(-100%); }
            #sidebar.open { transform: translateX(0); }
            .page-content { margin-left: 0; width: 100%; }
            #header-container { width: 100%; left: 0; }
            #menu-toggle { display: flex; justify-content: center; align-items: center; position: fixed; top: 10px; left: 10px; z-index: 2001; background: var(--card-bg-color); border: none; box-shadow: var(--shadow); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; }
        }
        @media (max-width: 600px) {
            :root { --base-font-size: 14px; }
            body { padding: 0.625rem; padding-top: 4.5rem; }
            #header-container { padding: 0 0.625rem; justify-content: flex-end; }
             #font-controls {
                position: static;
                transform: none;
                margin-right: auto;
             }
            #timer { display: none; }
            h1 { font-size: 2rem; }
            .question-container { padding: 1rem; }
            button.quiz-button { width: 100%; }
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Menu de Estudo</h2>
        <nav>
            <ul>
                <li><a href="#" data-section="ae" class="nav-link active">Quest√µes (Atividade)</a></li>
                <li class="has-submenu" id="livro-menu-item">
                    <a id="livro-toggle">Quest√µes (Livro) <i class="arrow"></i></a>
                    <ul class="submenu" id="livro-submenu">
                        <li><a href="#" data-section="livro-1" class="nav-link" title="Cuidados Nutricionais com o Paciente Hospitalizado">Unidade 1 - Cuid. Nutricionais</a></li>
                        <li><a href="#" data-section="livro-2" class="nav-link" title="Triagem e Avalia√ß√£o Nutricional">Unidade 2 - Triagem e Avalia√ß√£o</a></li>
                        <li><a href="#" data-section="livro-3" class="nav-link" title="Dietas Hospitalares, de Prova e Preparo">Unidade 3 - Dietas e Preparos</a></li>
                        <li><a href="#" data-section="livro-4" class="nav-link" title="Suplementa√ß√£o Oral de Vitaminas e Minerais">Unidade 4 - Suplementa√ß√£o Oral</a></li>
                        <li><a href="#" data-section="livro-5" class="nav-link" title="Paciente Adulto">Unidade 5 - Paciente Adulto</a></li>
                        <li><a href="#" data-section="livro-6" class="nav-link" title="Paciente Hepatopata">Unidade 6 - Paciente Hepatopata</a></li>
                        <li><a href="#" data-section="livro-7" class="nav-link" title="Paciente Renal Cr√¥nico">Unidade 7 - Paciente Renal Cr√¥nico</a></li>
                        <li><a href="#" data-section="livro-8" class="nav-link" title="Paciente Oncol√≥gico">Unidade 8 - Paciente Oncol√≥gico</a></li>
                        <li><a href="#" data-section="livro-9" class="nav-link" title="Paciente DPOC">Unidade 9 - Paciente DPOC</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>

    <div class="page-content">
        <div id="header-container">
            <div id="timer">Tempo: 00:00</div>
             <div id="font-controls">
                <button id="font-decrease" title="Diminuir Fonte">A-</button>
                <button id="font-increase" title="Aumentar Fonte">A+</button>
            </div>
            <div id="score-counter"></div>
        </div>
        <button id="menu-toggle">‚ò∞</button>

        <div class="main-content-wrapper">
            <h1>Quiz de Nutri√ß√£o Hospitalar</h1>
            <div id="final-score"></div>

            <section id="ae" class="content-section active">
                <h3>Atividade de Estudo</h3>
                <div id="quiz-container-ae"></div>
            </section>
            
            <section id="livro-1" class="content-section"><h3>Unidade 1: Cuidados Nutricionais com o Paciente Hospitalizado</h3><div id="quiz-container-livro-1"></div></section>
            <section id="livro-2" class="content-section"><h3>Unidade 2: Triagem e Avalia√ß√£o Nutricional</h3><div id="quiz-container-livro-2"></div></section>
            <section id="livro-3" class="content-section"><h3>Unidade 3: Dietas Hospitalares, de Prova e Preparo para Exames</h3><div id="quiz-container-livro-3"></div></section>
            <section id="livro-4" class="content-section"><h3>Unidade 4: Suplementa√ß√£o Oral de Vitaminas e Minerais</h3><div id="quiz-container-livro-4"></div></section>
            <section id="livro-5" class="content-section"><h3>Unidade 5: Paciente Adulto</h3><div id="quiz-container-livro-5"></div></section>
            <section id="livro-6" class="content-section"><h3>Unidade 6: Paciente Hepatopata</h3><div id="quiz-container-livro-6"></div></section>
            <section id="livro-7" class="content-section"><h3>Unidade 7: Paciente Renal Cr√¥nico</h3><div id="quiz-container-livro-7"></div></section>
            <section id="livro-8" class="content-section"><h3>Unidade 8: Paciente Oncol√≥gico</h3><div id="quiz-container-livro-8"></div></section>
            <section id="livro-9" class="content-section"><h3>Unidade 9: Paciente DPOC</h3><div id="quiz-container-livro-9"></div></section>
        </div>
    </div>

    <script>
        // --- QUIZ DATA (Snippets - o resto est√° oculto para brevidade) ---
        const allQuestions = {
            ae: [
                { question: "Com base na defini√ß√£o do n√≠vel assistencial...", options: ["I, II e V, apenas.", "I, III, IV e V, apenas.", "II, III, IV e V, apenas.", "II e IV, apenas.", "Todas as afirmativas est√£o corretas."], correct: 2, explanations: { correct: "A afirmativa I est√° incorreta..." } },
                // ... 19 outras quest√µes da AE ...
                { question: "Sobre a avalia√ß√£o nutricional em pacientes com DPOC...", options: ["I e II, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas.", "Todas as afirmativas est√£o corretas."], correct: 2, explanations: { correct: "A afirmativa IV √© falsa..." } }
            ],
            livro: [
                [ // Unidade 1
                    { question: "Qual item N√ÉO faz parte das 6 prioridades de Seguran√ßa do Paciente?", options: ["Identificar corretamente o paciente.", "Higienizar as m√£os.", "Reduzir risco de les√µes por press√£o.", "Realizar condutas individualizadas.", "Assegurar cirurgia no paciente correto."], correct: 3, explanations: { correct: "A segunda meta √© 'Melhorar a comunica√ß√£o entre profissionais de Sa√∫de'. 'Realizar condutas individualizadas' n√£o √© uma das 6 metas priorit√°rias." } },
                    { question: "Quais s√£o compet√™ncias do nutricionista hospitalar?<br>I. Prescri√ß√£o diet√©tica.<br>II. Educa√ß√£o alimentar para pacientes/familiares.<br>III. Elaborar Manual de Boas Pr√°ticas em Lact√°rio.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 4, explanations: { correct: "Todas as tr√™s s√£o compet√™ncias do nutricionista em hospital, abrangendo cl√≠nica, educa√ß√£o e gest√£o." } },
                    { question: "Sobre os crit√©rios da triagem nutricional, qual a op√ß√£o correta?", options: ["Deve ser aplicada exclusivamente por um nutricionista.", "Realiza todas as medidas antropom√©tricas.", "Pode ser autoaplicada pelo paciente ou familiar.", "Pacientes sem risco n√£o precisam de reavalia√ß√£o.", "Define o n√≠vel assistencial por toda a interna√ß√£o."], correct: 2, explanations: { correct: "A triagem pode ser um question√°rio autoaplicado. Pacientes sem risco inicial ainda precisam de acompanhamento, pois seu estado pode mudar." } }
                ],
                [ // Unidade 2
                    { question: "Sobre as triagens nutricionais, quais afirmativas s√£o corretas?<br>I - A MAN √© para pacientes de qualquer idade.<br>II - A NRS-2002 n√£o detecta bem a desnutri√ß√£o.<br>III - A Strong Kids √© recomendada para crian√ßas, mas n√£o validada no Brasil.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "I e III, apenas.", "I, II e III."], correct: 1, explanations: { correct: "I √© falsa (MAN √© para idosos). II √© falsa (NRS-2002 detecta desnutri√ß√£o e risco). Apenas a III est√° correta." } },
                    { question: "Sobre o diagn√≥stico nutricional, avalie as asser√ß√µes:<br>I - O diagn√≥stico nutricional √© o resultado da an√°lise de todos os dados da avalia√ß√£o.<br>PORQUE<br>II - Apenas com todos os dados √© poss√≠vel identificar o estado real do paciente.", options: ["As asser√ß√µes I e II s√£o verdadeiras, e a II justifica a I.", "As asser√ß√µes I e II s√£o verdadeiras, mas a II n√£o justifica a I.", "A asser√ß√£o I √© verdadeira e a II √© falsa.", "A asser√ß√£o I √© falsa e a II √© verdadeira.", "As asser√ß√µes I e II s√£o falsas."], correct: 0, explanations: { correct: "Ambas est√£o corretas e a II justifica a I. O diagn√≥stico completo (I) depende de uma avalia√ß√£o completa (II)." } },
                    { question: "Sobre a evolu√ß√£o nutricional em prontu√°rio, avalie:<br>I - A evolu√ß√£o √© um registro para uso exclusivo da equipe de nutri√ß√£o.<br>II - A prescri√ß√£o deve conter apenas o tipo de dieta e a via.<br>III - O diagn√≥stico deve ser apenas nutricional.<br>IV - O prontu√°rio exige linguagem t√©cnica e registro de avalia√ß√£o, diagn√≥stico e prescri√ß√£o.", options: ["I e IV, apenas.", "II e III, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas."], correct: 2, explanations: { correct: "I e II s√£o falsas. A evolu√ß√£o √© para toda a equipe e a prescri√ß√£o deve ser detalhada. III e IV est√£o corretas." } }
                ],
                [ // Unidade 3
                    { question: "Qual afirmativa N√ÉO contempla as recomenda√ß√µes do Guia Alimentar para a Popula√ß√£o Brasileira?", options: ["As recomenda√ß√µes devem se adequar √†s condi√ß√µes de sa√∫de.", "Alimentos in natura devem ser a base da alimenta√ß√£o.", "Alimenta√ß√£o saud√°vel deriva de sistema sustent√°vel.", "Prefira alimentos da esta√ß√£o e locais.", "Limite o uso de alimentos ultraprocessados, consumindo-os em pequenas quantidades."], correct: 4, explanations: { correct: "A recomenda√ß√£o do Guia Alimentar √© 'evitar' o consumo de alimentos ultraprocessados, que √© mais forte do que apenas 'limitar'." } },
                    { question: "Sobre as dietas hospitalares padr√£o, podemos afirmar:<br>I - Devem atingir no m√≠nimo 20Kcal/Kg/dia e 1,5g de prote√≠na/Kg/dia.<br>II - A dieta livre √© adequada para todos os pacientes.<br>III - A dieta leve √© equilibrada, mas com menos fibras.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 1, explanations: { correct: "I √© falsa (livro cita 30 kcal e 1,2g prot). II √© falsa. Apenas a III est√° correta." } },
                    { question: "Sobre a DIETA DE PROVA, podemos dizer que:<br>I - Deve ser mantida at√© a recupera√ß√£o completa.<br>II - √â iniciada em no m√°ximo 24h no p√≥s-operat√≥rio.<br>III - √â composta por l√≠quidos como √°gua, ch√°s e leite.<br>IV - √â transit√≥ria por ser nutricionalmente restrita.", options: ["I, apenas.", "II e IV, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "I, II, III e IV."], correct: 1, explanations: { correct: "I e III s√£o falsas. A dieta √© transit√≥ria e n√£o inclui leite. II e IV est√£o corretas." } }
                ],
                [ // Unidade 4
                    { question: "Sobre sinais de defici√™ncia de vitaminas do complexo B, podemos afirmar:", options: ["Fadiga √© sinal de defici√™ncia de B12, associada √† anemia microc√≠tica.", "Berib√©ri √© caracter√≠stico da defici√™ncia de vitamina B5.", "Aumento de homociste√≠na pode se associar a defici√™ncia de B6, B9 e B12.", "A falta de niacina (B3) pode levar a rubor facial.", "A defici√™ncia de B6 pode causar formigamento de m√£os e p√©s."], correct: 2, explanations: { correct: "Correto. O metabolismo da homociste√≠na depende de B6, B9 e B12." } },
                    { question: "Sobre a vitamina C, podemos afirmar:<br>I - Doses >3g podem aumentar o risco de c√°lculos renais.<br>II - Pacientes com infec√ß√µes respirat√≥rias se beneficiam de maior aporte.<br>III - A absor√ß√£o √© eficiente, independentemente da dose.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 2, explanations: { correct: "III √© falsa. A absor√ß√£o da vitamina C diminui conforme a dose aumenta. I e II est√£o corretas." } },
                    { question: "Sobre o √¥mega-3, avalie as asser√ß√µes:<br>I - Pode ser suplementado via √≥leo de peixe ou algas/linha√ßa.<br>PORQUE<br>II - A biotransforma√ß√£o ocorre pela mesma rota, sem diferen√ßa.", options: ["As asser√ß√µes I e II s√£o verdadeiras, e a II justifica a I.", "As asser√ß√µes I e II s√£o verdadeiras, mas a II n√£o justifica a I.", "A asser√ß√£o I √© verdadeira e a II √© falsa.", "A asser√ß√£o I √© falsa e a II √© verdadeira.", "As asser√ß√µes I e II s√£o falsas."], correct: 2, explanations: { correct: "I √© verdadeira. II √© falsa, pois o √¥mega-3 de fontes como a linha√ßa (ALA) necessita de mais convers√µes no corpo." } }
                ],
                [ // Unidade 5
                    { question: "Paciente (48a, 102kg, 173cm) com DMII, HAS, les√£o renal, inicia di√°lise. Relata n√°useas e hipoglicemia ao acordar (GC 82mg/dL). Afirma-se:<br>I - IMC de 34, mas o peso deve ser ajustado.<br>II - A prioridade √© a insufici√™ncia renal.<br>III - A restri√ß√£o de s√≥dio √© de 2g de sal/dia.<br>IV - Hipoglicemia √© < 70mg/dL.", options: ["I e IV, apenas.", "II e III, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas."], correct: 0, explanations: { correct: "II √© falsa (todas comorbidades s√£o importantes). III √© falsa (2g de s√≥dio ‚âà 5g de sal). I e IV est√£o corretas." } },
                    { question: "Sobre as orienta√ß√µes de alta, podemos afirmar:<br>I - Diab√©ticos em insulinoterapia devem aprender contagem de carboidratos.<br>II - Todos os pacientes deveriam receber orienta√ß√£o nutricional.<br>III - Pacientes com doen√ßa grave devem ser encaminhados para acompanhamento.<br>IV - Pacientes em suporte nutricional devem usar apenas dietas artesanais.", options: ["I e IV, apenas.", "II e III, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas."], correct: 3, explanations: { correct: "IV √© falsa. F√≥rmulas prontas s√£o prefer√≠veis. I, II e III est√£o corretas." } },
                    { question: "Sobre o paciente cir√∫rgico, avalie:<br>I - A abrevia√ß√£o de jejum recomendada √© de 6h para s√≥lidos e l√≠quidos.<br>PORQUE<br>II - Jejum deve ser prolongado no p√≥s-operat√≥rio.", options: ["As asser√ß√µes I e II s√£o verdadeiras, e a II justifica a I.", "As asser√ß√µes I e II s√£o verdadeiras, mas a II n√£o justifica a I.", "A asser√ß√£o I √© verdadeira e a II √© falsa.", "A asser√ß√£o I √© falsa e a II √© verdadeira.", "As asser√ß√µes I e II s√£o falsas."], correct: 4, explanations: { correct: "Ambas s√£o falsas. O jejum para l√≠quidos √© de 2h (I). A alimenta√ß√£o no p√≥s-operat√≥rio deve ser precoce (II)." } }
                ],
                [ // Unidade 6
                    { question: "Sobre a avalia√ß√£o do paciente hepatopata:", options: ["IMC < 20Kg/m¬≤ indica desnutri√ß√£o.", "Ascite grau I requer desconto de 10% do peso.", "IMC > 30Kg/m¬≤ indica sempre obesidade.", "Peso pr√©vio √† ascite n√£o deve ser usado.", "Edema em membros inferiores requer desconto de 5% do peso."], correct: 4, explanations: { correct: "Correto. As outras op√ß√µes est√£o erradas." } },
                    { question: "Sobre a triagem RFH-NPT:<br>I - Paciente em nutri√ß√£o enteral n√£o apresenta risco.<br>II - Perda de peso >10% aumenta o risco.<br>III - Ingest√£o insuficiente aumenta o risco.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 3, explanations: { correct: "I √© falsa; o uso de nutri√ß√£o enteral classifica o paciente como de alto risco. II e III est√£o corretas." } },
                    { question: "Sobre a doen√ßa hep√°tica cr√¥nica:", options: ["O paciente est√° em estado hipercatab√≥lico, aumentando o risco de desnutri√ß√£o.", "Icter√≠cia ocorre apenas nos quadros agudos.", "Cirrose por √°lcool pode ser revertida.", "Hepatites virais cr√¥nicas t√™m cura total.", "Pacientes com ascite devem ter o s√≥dio totalmente retirado."], correct: 0, explanations: { correct: "Correto. As outras s√£o falsas: cirrose √© irrevers√≠vel; e a restri√ß√£o de s√≥dio n√£o √© total." } }
                ],
                [ // Unidade 7
                    { question: "Sobre as doen√ßas renais, qual afirma√ß√£o est√° correta?", options: ["Doen√ßa renal aguda por um m√™s torna-se cr√¥nica.", "Todo diab√©tico desenvolver√° doen√ßa renal.", "H√°bitos de vida saud√°veis podem prevenir as doen√ßas renais.", "Todos os pacientes renais necessitam de restri√ß√£o h√≠drica.", "A doen√ßa √© mais prevalente em jovens e mulheres."], correct: 2, explanations: { correct: "Correto. As outras s√£o falsas." } },
                    { question: "Sobre a doen√ßa renal aguda (DRA), podemos afirmar:<br>I - √â transit√≥ria, durando at√© 3 meses.<br>II - Tem alta mortalidade (10-80%).<br>III - Pacientes em UTI podem desenvolv√™-la.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 4, explanations: { correct: "Todas as afirmativas descrevem corretamente a DRA." } },
                    { question: "Sobre a Doen√ßa Renal Cr√¥nica (DRC):", options: ["A desnutri√ß√£o √© uma das principais complica√ß√µes, aumentando o risco de mortalidade.", "Para ser DRC, o quadro deve durar pelo menos seis meses.", "Todo paciente com DRC necessitar√° de di√°lise.", "O estadiamento da doen√ßa √© feito pela capacidade urin√°ria.", "Na DRC, apenas a filtra√ß√£o renal √© comprometida."], correct: 0, explanations: { correct: "Correto. As outras s√£o falsas: DRC √© >3 meses; nem todos precisam de di√°lise; e todo o metabolismo √© afetado." } }
                ],
                [ // Unidade 8
                    { question: "Sobre a avalia√ß√£o do paciente oncol√≥gico:", options: ["O peso atual √© suficiente para avaliar o risco.", "O IMC √© o melhor indicador para sarcopenia.", "A albumina n√£o √© um bom preditor.", "A perda de 5% do peso em um m√™s indica risco elevado.", "Edema n√£o interfere no diagn√≥stico."], correct: 3, explanations: { correct: "Correto. Perda de >5% em um m√™s √© um crit√©rio de risco." } },
                    { question: "Sobre a sistematiza√ß√£o do atendimento oncol√≥gico:<br>I - Todo paciente oncol√≥gico √©, no m√≠nimo, n√≠vel secund√°rio.<br>II - Um paciente oncol√≥gico eutr√≥fico pode ser n√≠vel prim√°rio.<br>III - O risco √© classificado com base no diagn√≥stico, alimenta√ß√£o e necessidades.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 3, explanations: { correct: "I √© falsa. Um paciente oncol√≥gico pode estar sem risco nutricional. II e III est√£o corretas." } },
                    { question: "Para controle dos sintomas no tratamento oncol√≥gico:", options: ["Para disfagia, trocar s√≥lidos por l√≠quidos.", "Para xerostomia, usar gotas de lim√£o.", "Para disgeusia, retirar temperos.", "Para n√°usea, diminuir refei√ß√µes.", "Para mucosite, usar temperaturas extremas."], correct: 1, explanations: { correct: "Correto. Para xerostomia, gotas de lim√£o estimulam a saliva√ß√£o." } }
                ],
                [ // Unidade 9
                    { question: "Sobre as causas da DPOC:", options: ["Fatores ambientais n√£o interferem.", "Exposi√ß√£o a c√°dmio e s√≠lica s√£o riscos ocupacionais.", "Afeta mais fumantes passivos.", "Mulheres apresentam maior risco.", "√â mais prevalente em pessoas com alta condi√ß√£o socioecon√¥mica."], correct: 1, explanations: { correct: "Correto. As outras s√£o falsas." } },
                    { question: "Sobre a avalia√ß√£o nutricional em DPOC:", options: ["IMC normal √© de 22 a 29 Kg/m¬≤.", "Dobras cut√¢neas n√£o t√™m correla√ß√£o com a fun√ß√£o muscular.", "Albumina ajuda a diagnosticar perda de capacidade respirat√≥ria.", "√çndice creatinina/altura √© bom indicador de massa magra.", "Vitamina D ideal deve estar acima de 20 nmol/L."], correct: 3, explanations: { correct: "Correto. As outras est√£o erradas: IMC normal √© 22-27." } },
                    { question: "Sobre o manejo de sintomas na DPOC:<br>I - Repouso antes das refei√ß√µes ajuda na dispneia.<br>II - Dietas brandas/pastosas ajudam na ingest√£o.<br>III - Alimentos secos/amenos ajudam na saciedade precoce.<br>IV - Aumento da densidade energ√©tica beneficia desnutridos/inapetentes.", options: ["I, apenas.", "II e IV, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "I, II, III e IV."], correct: 4, explanations: { correct: "Todas as afirmativas s√£o estrat√©gias v√°lidas para manejar sintomas na DPOC." } }
                ]
            ]
        };
        
        // --- GLOBAL APP STATE ---
        let correctAnswers = 0;
        let answeredQuestions = 0;
        const totalQuestions = Object.values(allQuestions).flat(2).length;
        const selectedAnswers = {};
        
        // --- CORE FUNCTIONS ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeQuiz();
            setupEventListeners();
        });

        function initializeQuiz() {
            loadAllQuestions();
            updateScoreCounter();
            startTimer();
        }
        
        function setupEventListeners() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => handleNavClick(e, link, navLinks, sections, sidebar));
            });

            document.getElementById('livro-toggle').addEventListener('click', function(e){
                e.preventDefault();
                document.getElementById('livro-submenu').classList.toggle('open');
                document.getElementById('livro-menu-item').classList.toggle('open');
            });
            
            menuToggle.addEventListener('click', () => sidebar.classList.toggle('open'));
            
            document.getElementById('font-increase').addEventListener('click', () => changeFontSize(1));
            document.getElementById('font-decrease').addEventListener('click', () => changeFontSize(-1));
        }

        function handleNavClick(e, link, navLinks, sections, sidebar) {
            e.preventDefault();
            const sectionId = link.getAttribute('data-section');
            if (!sectionId) return;

            navLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');

            if (link.closest('.submenu')) {
                document.getElementById('livro-toggle').classList.add('active');
            } else if (link.id !== 'livro-toggle') {
                 document.getElementById('livro-toggle').classList.remove('active');
            }

            sections.forEach(section => section.classList.toggle('active', section.id === sectionId));
            
            if (window.innerWidth <= 1024) {
                sidebar.classList.remove('open');
            }
        }
        
        function loadAllQuestions() {
            for (const category in allQuestions) {
                if (category === 'ae') {
                    document.getElementById('quiz-container-ae').innerHTML = generateQuestionHTML(allQuestions.ae, 'ae');
                } else {
                    allQuestions.livro.forEach((unit, index) => {
                        const unitId = index + 1;
                        document.getElementById(`quiz-container-livro-${unitId}`).innerHTML = generateQuestionHTML(unit, `livro-${unitId}`);
                    });
                }
            }
        }

        function generateQuestionHTML(questions, prefix) {
            return questions.map((q, i) => {
                const qId = `${prefix}-${i}`;
                return `
                <div class="question-container" id="question-${qId}">
                    <div class="question"><strong>${i + 1}¬™ Quest√£o</strong><br>${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, optIdx) => `
                            <label>
                                <input type="radio" name="answer-${qId}" value="${optIdx}" onchange="selectAnswer('${qId}')">
                                <span>${opt}</span>
                            </label>`).join('')}
                    </div>
                    <button id="submit-btn-${qId}" class="quiz-button" onclick="checkAnswer('${qId}')" disabled>Verificar Resposta</button>
                    <div class="feedback" id="feedback-${qId}" style="display: none;"></div>
                </div>`;
            }).join('');
        }
        
        function selectAnswer(questionId) {
            const radio = document.querySelector(`input[name="answer-${questionId}"]:checked`);
            if (radio) {
                selectedAnswers[questionId] = parseInt(radio.value, 10);
                document.getElementById(`submit-btn-${questionId}`).disabled = false;
            }
        }
        
        function checkAnswer(questionId) {
            const parts = questionId.split('-'); // "ae-0" or "livro-1-0"
            const prefix = parts[0];
            let questionData;

            if (prefix === 'ae') {
                const questionIndex = parseInt(parts[1], 10);
                questionData = allQuestions.ae[questionIndex];
            } else if (prefix === 'livro') {
                const unitIndex = parseInt(parts[1], 10) - 1; // unit 1 is index 0
                const questionIndex = parseInt(parts[2], 10);
                questionData = allQuestions.livro[unitIndex][questionIndex];
            }

            if (!questionData) return; // Exit if question data not found

            const userAnswer = selectedAnswers[questionId];
            if (userAnswer === undefined) return;

            const isCorrect = userAnswer === questionData.correct;
            const feedbackDiv = document.getElementById(`feedback-${questionId}`);
            
            if (isCorrect) {
                correctAnswers++;
                feedbackDiv.innerHTML = `<p class="correct-feedback"><strong>Correto!</strong> ${questionData.explanations.correct}</p>`;
                feedbackDiv.style.borderLeftColor = "var(--correct-color)";
            } else {
                feedbackDiv.innerHTML = `<p class="incorrect-feedback"><strong>Incorreto.</strong></p><p>${questionData.explanations.correct}</p>`;
                feedbackDiv.style.borderLeftColor = "var(--incorrect-color)";
            }
            
            if (!feedbackDiv.hasAttribute('data-answered')) {
                answeredQuestions++;
                feedbackDiv.setAttribute('data-answered', 'true');
            }
            
            updateScoreCounter();
            
            const labels = document.querySelectorAll(`#question-${questionId} .options label`);
            labels.forEach((label, i) => {
                if (i === questionData.correct) label.classList.add('correct');
                else if (i === userAnswer) label.classList.add('incorrect');
            });

            document.getElementById(`submit-btn-${questionId}`).style.display = 'none';
            feedbackDiv.style.display = 'block';
            
            document.querySelectorAll(`input[name="answer-${questionId}"]`).forEach(r => r.disabled = true);

            if (answeredQuestions === totalQuestions) {
                const scoreDiv = document.getElementById('final-score');
                scoreDiv.innerHTML = `üéâ Quiz finalizado! Voc√™ acertou <span>${correctAnswers} de ${totalQuestions}</span> quest√µes. üéâ`;
                scoreDiv.style.display = 'block';
            }
        }

        // --- UI AND UTILITY FUNCTIONALITY ---
        let currentFontSize = 16;
        function changeFontSize(amount) {
            const minSize = 12;
            const maxSize = 20;
            const newSize = currentFontSize + amount;
            if (newSize >= minSize && newSize <= maxSize) {
                currentFontSize = newSize;
                document.documentElement.style.fontSize = `${currentFontSize}px`;
            }
        }

        function startTimer() {
            const timerElement = document.getElementById('timer');
            let seconds = 0;
            setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                timerElement.textContent = `Tempo: ${mins}:${secs}`;
            }, 1000);
        }

        function updateScoreCounter() {
            document.getElementById('score-counter').innerHTML = `‚úÖ Acertos: ${correctAnswers} de ${totalQuestions}`;
        }
    </script>
</body>
</html>
