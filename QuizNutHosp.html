<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Nutrição Hospitalar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --base-font-size: 16px;
            --primary-color: #1A73E8;
            --primary-hover-color: #1765CC;
            --correct-color: #188038;
            --correct-bg-color: #E6F4EA;
            --incorrect-color: #D93025;
            --incorrect-bg-color: #FCE8E6;
            --neutral-bg-color: #f1f3f4;
            --text-color: #202124;
            --light-text-color: #5f6368;
            --border-color: #dadce0;
            --card-bg-color: #ffffff;
            --shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 2px 6px 2px rgba(60,64,67,0.15);
            --sidebar-width: 300px;
        }

        html {
            font-size: var(--base-font-size);
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Google Sans', 'Roboto', sans-serif;
            background-color: var(--neutral-bg-color);
            margin: 0;
            display: flex;
            color: var(--text-color);
        }

        /* --- Sidebar --- */
        #sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background-color: var(--card-bg-color);
            position: fixed;
            top: 0;
            left: 0;
            padding: 1.25rem;
            box-sizing: border-box;
            overflow-y: auto;
            transition: transform 0.3s ease-in-out;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            border-top-right-radius: 1rem;
            border-bottom-right-radius: 1rem;
            z-index: 2000;
        }

        #sidebar h2 {
            font-size: 1.5rem;
            color: var(--text-color);
            margin-top: 0;
            margin-bottom: 1.25rem;
            padding-bottom: 0.625rem;
            border-bottom: 1px solid var(--border-color);
        }

        #sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #sidebar nav li a {
            display: block;
            padding: 0.75rem 1rem;
            text-decoration: none;
            color: var(--light-text-color);
            font-weight: 500;
            border-radius: 1.5rem;
            transition: background-color 0.2s ease, color 0.2s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #sidebar nav li a:hover, #sidebar nav li a.active {
            background-color: #E8F0FE;
            color: var(--primary-color);
        }
        
        #sidebar .submenu {
            padding-left: 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
        }

        #sidebar .submenu.open {
            max-height: 30rem;
        }
        
        #sidebar .has-submenu > a {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #sidebar .arrow {
            border: solid var(--light-text-color);
            border-width: 0 2px 2px 0;
            display: inline-block;
            padding: 3px;
            transform: rotate(45deg);
            transition: transform 0.3s, border-color 0.3s;
        }
        
        #sidebar .has-submenu > a:hover .arrow, #sidebar .has-submenu > a.active .arrow {
             border-color: var(--primary-color);
        }
        
        #sidebar .has-submenu.open > a .arrow {
            transform: rotate(-135deg);
        }

        /* --- Main Content --- */
        .page-content {
            margin-left: var(--sidebar-width);
            width: calc(100% - var(--sidebar-width));
            padding: 1.25rem;
            padding-top: 5rem;
        }
        
        .content-section { display: none; animation: fadeIn 0.5s ease; }
        .content-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #header-container {
            width: calc(100% - var(--sidebar-width));
            background-color: rgba(241, 243, 244, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            padding: 0 1.5rem;
            box-sizing: border-box;
            border-bottom: 1px solid var(--border-color);
            transition: width 0.3s ease-in-out, left 0.3s ease-in-out;
        }

        #timer, #score-counter {
            font-size: 1rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 1.5rem;
            transition: all 0.3s ease;
        }
        
        #timer { color: var(--primary-color); background-color: #E8F0FE; }
        #score-counter { color: var(--correct-color); background-color: var(--correct-bg-color); }

        #font-controls {
            display: flex;
            align-items: center;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        #font-controls button {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--light-text-color);
            font-weight: bold;
            width: 2.25rem;
            height: 2.25rem;
            border-radius: 50%;
            cursor: pointer;
            margin: 0 0.25rem;
            transition: background-color 0.2s, color 0.2s;
        }

        #font-controls button:hover {
            background-color: #E8F0FE;
            color: var(--primary-color);
        }

        .main-content-wrapper {
            width: 100%;
            max-width: 850px;
            margin: 0 auto;
        }

        h1 { text-align: center; color: var(--text-color); font-size: 2.5rem; font-weight: 700; margin-bottom: 0.625rem; }

        h3 { text-align: center; color: var(--light-text-color); font-size: 1.5rem; font-weight: 400; margin-top: 2.5rem; margin-bottom: 1.25rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.625rem; }

        .question-container { background: var(--card-bg-color); border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--shadow); border: 1px solid transparent; transition: box-shadow 0.3s ease; }

        .question { font-weight: 500; font-size: 1.2rem; margin-bottom: 1.25rem; color: var(--text-color); line-height: 1.6; }

        .options label { display: flex; align-items: center; margin: 0.625rem 0; padding: 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; line-height: 1.5; }

        .options label:hover { background: var(--neutral-bg-color); border-color: #c4c8cc; }

        .options input { margin-right: 0.75rem; width: 1.125rem; height: 1.125rem; accent-color: var(--primary-color); }

        .correct { background: var(--correct-bg-color) !important; border-color: var(--correct-color) !important; font-weight: 500; }
        .incorrect { background: var(--incorrect-bg-color) !important; border-color: var(--incorrect-color) !important; font-weight: 500; }

        button.quiz-button { display: block; width: 220px; margin: 1.5rem auto 0; padding: 0.75rem 1.25rem; background: var(--primary-color); color: white; border: none; border-radius: 0.5rem; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease, transform 0.2s ease; }

        button.quiz-button:disabled { background: #bdbdbd; cursor: not-allowed; transform: none; }
        button.quiz-button:hover:not(:disabled) { background: var(--primary-hover-color); transform: translateY(-2px); }

        .feedback { margin-top: 1.25rem; font-size: 1rem; line-height: 1.7; background: #f1f3f4; padding: 1.25rem; border-radius: 0.5rem; border-left: 4px solid var(--border-color); animation: slideDown 0.4s ease; }
        
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .feedback .correct-feedback::before { content: '✅ '; }
        .feedback .incorrect-feedback::before { content: '❌ '; }

        #final-score { text-align: center; font-size: 1.5rem; color: var(--text-color); margin: 1.25rem 0; background: var(--card-bg-color); padding: 1.5rem; border-radius: 0.75rem; display: none; box-shadow: var(--shadow); }
        #final-score span { font-weight: 700; color: var(--primary-color); }
        
        #menu-toggle { display: none; }

        /* --- Responsive Design --- */
        @media (max-width: 1024px) {
            #sidebar { transform: translateX(-100%); }
            #sidebar.open { transform: translateX(0); }
            .page-content { margin-left: 0; width: 100%; }
            #header-container { width: 100%; left: 0; }
            #menu-toggle { display: flex; justify-content: center; align-items: center; position: fixed; top: 10px; left: 10px; z-index: 2001; background: var(--card-bg-color); border: none; box-shadow: var(--shadow); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; }
        }
        @media (max-width: 600px) {
            :root { --base-font-size: 14px; }
            body { padding: 0.625rem; padding-top: 4.5rem; }
            #header-container { padding: 0 0.625rem; justify-content: flex-end; }
             #font-controls {
                position: static;
                transform: none;
                margin-right: auto;
             }
            #timer { display: none; }
            h1 { font-size: 2rem; }
            .question-container { padding: 1rem; }
            button.quiz-button { width: 100%; }
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Menu de Estudo</h2>
        <nav>
            <ul>
                <li><a href="#" data-section="ae" class="nav-link active">Questões (Atividade)</a></li>
                <li class="has-submenu" id="livro-menu-item">
                    <a id="livro-toggle">Questões (Livro) <i class="arrow"></i></a>
                    <ul class="submenu" id="livro-submenu">
                        <li><a href="#" data-section="livro-1" class="nav-link" title="Cuidados Nutricionais com o Paciente Hospitalizado">Unidade 1 - Cuid. Nutricionais</a></li>
                        <li><a href="#" data-section="livro-2" class="nav-link" title="Triagem e Avaliação Nutricional">Unidade 2 - Triagem e Avaliação</a></li>
                        <li><a href="#" data-section="livro-3" class="nav-link" title="Dietas Hospitalares, de Prova e Preparo">Unidade 3 - Dietas e Preparos</a></li>
                        <li><a href="#" data-section="livro-4" class="nav-link" title="Suplementação Oral de Vitaminas e Minerais">Unidade 4 - Suplementação Oral</a></li>
                        <li><a href="#" data-section="livro-5" class="nav-link" title="Paciente Adulto">Unidade 5 - Paciente Adulto</a></li>
                        <li><a href="#" data-section="livro-6" class="nav-link" title="Paciente Hepatopata">Unidade 6 - Paciente Hepatopata</a></li>
                        <li><a href="#" data-section="livro-7" class="nav-link" title="Paciente Renal Crônico">Unidade 7 - Paciente Renal Crônico</a></li>
                        <li><a href="#" data-section="livro-8" class="nav-link" title="Paciente Oncológico">Unidade 8 - Paciente Oncológico</a></li>
                        <li><a href="#" data-section="livro-9" class="nav-link" title="Paciente DPOC">Unidade 9 - Paciente DPOC</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>

    <div class="page-content">
        <div id="header-container">
            <div id="timer">Tempo: 00:00</div>
             <div id="font-controls">
                <button id="font-decrease" title="Diminuir Fonte">A-</button>
                <button id="font-increase" title="Aumentar Fonte">A+</button>
            </div>
            <div id="score-counter"></div>
        </div>
        <button id="menu-toggle">☰</button>

        <div class="main-content-wrapper">
            <h1>Quiz de Nutrição Hospitalar</h1>
            <div id="final-score"></div>

            <section id="ae" class="content-section active">
                <h3>Atividade de Estudo</h3>
                <div id="quiz-container-ae"></div>
            </section>
            
            <section id="livro-1" class="content-section"><h3>Unidade 1: Cuidados Nutricionais com o Paciente Hospitalizado</h3><div id="quiz-container-livro-1"></div></section>
            <section id="livro-2" class="content-section"><h3>Unidade 2: Triagem e Avaliação Nutricional</h3><div id="quiz-container-livro-2"></div></section>
            <section id="livro-3" class="content-section"><h3>Unidade 3: Dietas Hospitalares, de Prova e Preparo para Exames</h3><div id="quiz-container-livro-3"></div></section>
            <section id="livro-4" class="content-section"><h3>Unidade 4: Suplementação Oral de Vitaminas e Minerais</h3><div id="quiz-container-livro-4"></div></section>
            <section id="livro-5" class="content-section"><h3>Unidade 5: Paciente Adulto</h3><div id="quiz-container-livro-5"></div></section>
            <section id="livro-6" class="content-section"><h3>Unidade 6: Paciente Hepatopata</h3><div id="quiz-container-livro-6"></div></section>
            <section id="livro-7" class="content-section"><h3>Unidade 7: Paciente Renal Crônico</h3><div id="quiz-container-livro-7"></div></section>
            <section id="livro-8" class="content-section"><h3>Unidade 8: Paciente Oncológico</h3><div id="quiz-container-livro-8"></div></section>
            <section id="livro-9" class="content-section"><h3>Unidade 9: Paciente DPOC</h3><div id="quiz-container-livro-9"></div></section>
        </div>
    </div>

    <script>
        // --- QUIZ DATA (Snippets - o resto está oculto para brevidade) ---
        const allQuestions = {
            ae: [
                { question: "Com base na definição do nível assistencial...", options: ["I, II e V, apenas.", "I, III, IV e V, apenas.", "II, III, IV e V, apenas.", "II e IV, apenas.", "Todas as afirmativas estão corretas."], correct: 2, explanations: { correct: "A afirmativa I está incorreta..." } },
                // ... 19 outras questões da AE ...
                { question: "Sobre a avaliação nutricional em pacientes com DPOC...", options: ["I e II, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas.", "Todas as afirmativas estão corretas."], correct: 2, explanations: { correct: "A afirmativa IV é falsa..." } }
            ],
            livro: [
                [ // Unidade 1
                    { question: "Qual item NÃO faz parte das 6 prioridades de Segurança do Paciente?", options: ["Identificar corretamente o paciente.", "Higienizar as mãos.", "Reduzir risco de lesões por pressão.", "Realizar condutas individualizadas.", "Assegurar cirurgia no paciente correto."], correct: 3, explanations: { correct: "A segunda meta é 'Melhorar a comunicação entre profissionais de Saúde'. 'Realizar condutas individualizadas' não é uma das 6 metas prioritárias." } },
                    { question: "Quais são competências do nutricionista hospitalar?<br>I. Prescrição dietética.<br>II. Educação alimentar para pacientes/familiares.<br>III. Elaborar Manual de Boas Práticas em Lactário.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 4, explanations: { correct: "Todas as três são competências do nutricionista em hospital, abrangendo clínica, educação e gestão." } },
                    { question: "Sobre os critérios da triagem nutricional, qual a opção correta?", options: ["Deve ser aplicada exclusivamente por um nutricionista.", "Realiza todas as medidas antropométricas.", "Pode ser autoaplicada pelo paciente ou familiar.", "Pacientes sem risco não precisam de reavaliação.", "Define o nível assistencial por toda a internação."], correct: 2, explanations: { correct: "A triagem pode ser um questionário autoaplicado. Pacientes sem risco inicial ainda precisam de acompanhamento, pois seu estado pode mudar." } }
                ],
                [ // Unidade 2
                    { question: "Sobre as triagens nutricionais, quais afirmativas são corretas?<br>I - A MAN é para pacientes de qualquer idade.<br>II - A NRS-2002 não detecta bem a desnutrição.<br>III - A Strong Kids é recomendada para crianças, mas não validada no Brasil.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "I e III, apenas.", "I, II e III."], correct: 1, explanations: { correct: "I é falsa (MAN é para idosos). II é falsa (NRS-2002 detecta desnutrição e risco). Apenas a III está correta." } },
                    { question: "Sobre o diagnóstico nutricional, avalie as asserções:<br>I - O diagnóstico nutricional é o resultado da análise de todos os dados da avaliação.<br>PORQUE<br>II - Apenas com todos os dados é possível identificar o estado real do paciente.", options: ["As asserções I e II são verdadeiras, e a II justifica a I.", "As asserções I e II são verdadeiras, mas a II não justifica a I.", "A asserção I é verdadeira e a II é falsa.", "A asserção I é falsa e a II é verdadeira.", "As asserções I e II são falsas."], correct: 0, explanations: { correct: "Ambas estão corretas e a II justifica a I. O diagnóstico completo (I) depende de uma avaliação completa (II)." } },
                    { question: "Sobre a evolução nutricional em prontuário, avalie:<br>I - A evolução é um registro para uso exclusivo da equipe de nutrição.<br>II - A prescrição deve conter apenas o tipo de dieta e a via.<br>III - O diagnóstico deve ser apenas nutricional.<br>IV - O prontuário exige linguagem técnica e registro de avaliação, diagnóstico e prescrição.", options: ["I e IV, apenas.", "II e III, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas."], correct: 2, explanations: { correct: "I e II são falsas. A evolução é para toda a equipe e a prescrição deve ser detalhada. III e IV estão corretas." } }
                ],
                [ // Unidade 3
                    { question: "Qual afirmativa NÃO contempla as recomendações do Guia Alimentar para a População Brasileira?", options: ["As recomendações devem se adequar às condições de saúde.", "Alimentos in natura devem ser a base da alimentação.", "Alimentação saudável deriva de sistema sustentável.", "Prefira alimentos da estação e locais.", "Limite o uso de alimentos ultraprocessados, consumindo-os em pequenas quantidades."], correct: 4, explanations: { correct: "A recomendação do Guia Alimentar é 'evitar' o consumo de alimentos ultraprocessados, que é mais forte do que apenas 'limitar'." } },
                    { question: "Sobre as dietas hospitalares padrão, podemos afirmar:<br>I - Devem atingir no mínimo 20Kcal/Kg/dia e 1,5g de proteína/Kg/dia.<br>II - A dieta livre é adequada para todos os pacientes.<br>III - A dieta leve é equilibrada, mas com menos fibras.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 1, explanations: { correct: "I é falsa (livro cita 30 kcal e 1,2g prot). II é falsa. Apenas a III está correta." } },
                    { question: "Sobre a DIETA DE PROVA, podemos dizer que:<br>I - Deve ser mantida até a recuperação completa.<br>II - É iniciada em no máximo 24h no pós-operatório.<br>III - É composta por líquidos como água, chás e leite.<br>IV - É transitória por ser nutricionalmente restrita.", options: ["I, apenas.", "II e IV, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "I, II, III e IV."], correct: 1, explanations: { correct: "I e III são falsas. A dieta é transitória e não inclui leite. II e IV estão corretas." } }
                ],
                [ // Unidade 4
                    { question: "Sobre sinais de deficiência de vitaminas do complexo B, podemos afirmar:", options: ["Fadiga é sinal de deficiência de B12, associada à anemia microcítica.", "Beribéri é característico da deficiência de vitamina B5.", "Aumento de homocisteína pode se associar a deficiência de B6, B9 e B12.", "A falta de niacina (B3) pode levar a rubor facial.", "A deficiência de B6 pode causar formigamento de mãos e pés."], correct: 2, explanations: { correct: "Correto. O metabolismo da homocisteína depende de B6, B9 e B12." } },
                    { question: "Sobre a vitamina C, podemos afirmar:<br>I - Doses >3g podem aumentar o risco de cálculos renais.<br>II - Pacientes com infecções respiratórias se beneficiam de maior aporte.<br>III - A absorção é eficiente, independentemente da dose.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 2, explanations: { correct: "III é falsa. A absorção da vitamina C diminui conforme a dose aumenta. I e II estão corretas." } },
                    { question: "Sobre o ômega-3, avalie as asserções:<br>I - Pode ser suplementado via óleo de peixe ou algas/linhaça.<br>PORQUE<br>II - A biotransformação ocorre pela mesma rota, sem diferença.", options: ["As asserções I e II são verdadeiras, e a II justifica a I.", "As asserções I e II são verdadeiras, mas a II não justifica a I.", "A asserção I é verdadeira e a II é falsa.", "A asserção I é falsa e a II é verdadeira.", "As asserções I e II são falsas."], correct: 2, explanations: { correct: "I é verdadeira. II é falsa, pois o ômega-3 de fontes como a linhaça (ALA) necessita de mais conversões no corpo." } }
                ],
                [ // Unidade 5
                    { question: "Paciente (48a, 102kg, 173cm) com DMII, HAS, lesão renal, inicia diálise. Relata náuseas e hipoglicemia ao acordar (GC 82mg/dL). Afirma-se:<br>I - IMC de 34, mas o peso deve ser ajustado.<br>II - A prioridade é a insuficiência renal.<br>III - A restrição de sódio é de 2g de sal/dia.<br>IV - Hipoglicemia é < 70mg/dL.", options: ["I e IV, apenas.", "II e III, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas."], correct: 0, explanations: { correct: "II é falsa (todas comorbidades são importantes). III é falsa (2g de sódio ≈ 5g de sal). I e IV estão corretas." } },
                    { question: "Sobre as orientações de alta, podemos afirmar:<br>I - Diabéticos em insulinoterapia devem aprender contagem de carboidratos.<br>II - Todos os pacientes deveriam receber orientação nutricional.<br>III - Pacientes com doença grave devem ser encaminhados para acompanhamento.<br>IV - Pacientes em suporte nutricional devem usar apenas dietas artesanais.", options: ["I e IV, apenas.", "II e III, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "II, III e IV, apenas."], correct: 3, explanations: { correct: "IV é falsa. Fórmulas prontas são preferíveis. I, II e III estão corretas." } },
                    { question: "Sobre o paciente cirúrgico, avalie:<br>I - A abreviação de jejum recomendada é de 6h para sólidos e líquidos.<br>PORQUE<br>II - Jejum deve ser prolongado no pós-operatório.", options: ["As asserções I e II são verdadeiras, e a II justifica a I.", "As asserções I e II são verdadeiras, mas a II não justifica a I.", "A asserção I é verdadeira e a II é falsa.", "A asserção I é falsa e a II é verdadeira.", "As asserções I e II são falsas."], correct: 4, explanations: { correct: "Ambas são falsas. O jejum para líquidos é de 2h (I). A alimentação no pós-operatório deve ser precoce (II)." } }
                ],
                [ // Unidade 6
                    { question: "Sobre a avaliação do paciente hepatopata:", options: ["IMC < 20Kg/m² indica desnutrição.", "Ascite grau I requer desconto de 10% do peso.", "IMC > 30Kg/m² indica sempre obesidade.", "Peso prévio à ascite não deve ser usado.", "Edema em membros inferiores requer desconto de 5% do peso."], correct: 4, explanations: { correct: "Correto. As outras opções estão erradas." } },
                    { question: "Sobre a triagem RFH-NPT:<br>I - Paciente em nutrição enteral não apresenta risco.<br>II - Perda de peso >10% aumenta o risco.<br>III - Ingestão insuficiente aumenta o risco.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 3, explanations: { correct: "I é falsa; o uso de nutrição enteral classifica o paciente como de alto risco. II e III estão corretas." } },
                    { question: "Sobre a doença hepática crônica:", options: ["O paciente está em estado hipercatabólico, aumentando o risco de desnutrição.", "Icterícia ocorre apenas nos quadros agudos.", "Cirrose por álcool pode ser revertida.", "Hepatites virais crônicas têm cura total.", "Pacientes com ascite devem ter o sódio totalmente retirado."], correct: 0, explanations: { correct: "Correto. As outras são falsas: cirrose é irreversível; e a restrição de sódio não é total." } }
                ],
                [ // Unidade 7
                    { question: "Sobre as doenças renais, qual afirmação está correta?", options: ["Doença renal aguda por um mês torna-se crônica.", "Todo diabético desenvolverá doença renal.", "Hábitos de vida saudáveis podem prevenir as doenças renais.", "Todos os pacientes renais necessitam de restrição hídrica.", "A doença é mais prevalente em jovens e mulheres."], correct: 2, explanations: { correct: "Correto. As outras são falsas." } },
                    { question: "Sobre a doença renal aguda (DRA), podemos afirmar:<br>I - É transitória, durando até 3 meses.<br>II - Tem alta mortalidade (10-80%).<br>III - Pacientes em UTI podem desenvolvê-la.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 4, explanations: { correct: "Todas as afirmativas descrevem corretamente a DRA." } },
                    { question: "Sobre a Doença Renal Crônica (DRC):", options: ["A desnutrição é uma das principais complicações, aumentando o risco de mortalidade.", "Para ser DRC, o quadro deve durar pelo menos seis meses.", "Todo paciente com DRC necessitará de diálise.", "O estadiamento da doença é feito pela capacidade urinária.", "Na DRC, apenas a filtração renal é comprometida."], correct: 0, explanations: { correct: "Correto. As outras são falsas: DRC é >3 meses; nem todos precisam de diálise; e todo o metabolismo é afetado." } }
                ],
                [ // Unidade 8
                    { question: "Sobre a avaliação do paciente oncológico:", options: ["O peso atual é suficiente para avaliar o risco.", "O IMC é o melhor indicador para sarcopenia.", "A albumina não é um bom preditor.", "A perda de 5% do peso em um mês indica risco elevado.", "Edema não interfere no diagnóstico."], correct: 3, explanations: { correct: "Correto. Perda de >5% em um mês é um critério de risco." } },
                    { question: "Sobre a sistematização do atendimento oncológico:<br>I - Todo paciente oncológico é, no mínimo, nível secundário.<br>II - Um paciente oncológico eutrófico pode ser nível primário.<br>III - O risco é classificado com base no diagnóstico, alimentação e necessidades.", options: ["I, apenas.", "III, apenas.", "I e II, apenas.", "II e III, apenas.", "I, II e III."], correct: 3, explanations: { correct: "I é falsa. Um paciente oncológico pode estar sem risco nutricional. II e III estão corretas." } },
                    { question: "Para controle dos sintomas no tratamento oncológico:", options: ["Para disfagia, trocar sólidos por líquidos.", "Para xerostomia, usar gotas de limão.", "Para disgeusia, retirar temperos.", "Para náusea, diminuir refeições.", "Para mucosite, usar temperaturas extremas."], correct: 1, explanations: { correct: "Correto. Para xerostomia, gotas de limão estimulam a salivação." } }
                ],
                [ // Unidade 9
                    { question: "Sobre as causas da DPOC:", options: ["Fatores ambientais não interferem.", "Exposição a cádmio e sílica são riscos ocupacionais.", "Afeta mais fumantes passivos.", "Mulheres apresentam maior risco.", "É mais prevalente em pessoas com alta condição socioeconômica."], correct: 1, explanations: { correct: "Correto. As outras são falsas." } },
                    { question: "Sobre a avaliação nutricional em DPOC:", options: ["IMC normal é de 22 a 29 Kg/m².", "Dobras cutâneas não têm correlação com a função muscular.", "Albumina ajuda a diagnosticar perda de capacidade respiratória.", "Índice creatinina/altura é bom indicador de massa magra.", "Vitamina D ideal deve estar acima de 20 nmol/L."], correct: 3, explanations: { correct: "Correto. As outras estão erradas: IMC normal é 22-27." } },
                    { question: "Sobre o manejo de sintomas na DPOC:<br>I - Repouso antes das refeições ajuda na dispneia.<br>II - Dietas brandas/pastosas ajudam na ingestão.<br>III - Alimentos secos/amenos ajudam na saciedade precoce.<br>IV - Aumento da densidade energética beneficia desnutridos/inapetentes.", options: ["I, apenas.", "II e IV, apenas.", "III e IV, apenas.", "I, II e III, apenas.", "I, II, III e IV."], correct: 4, explanations: { correct: "Todas as afirmativas são estratégias válidas para manejar sintomas na DPOC." } }
                ]
            ]
        };
        
        // --- GLOBAL APP STATE ---
        let correctAnswers = 0;
        let answeredQuestions = 0;
        const totalQuestions = Object.values(allQuestions).flat(2).length;
        const selectedAnswers = {};
        
        // --- CORE FUNCTIONS ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeQuiz();
            setupEventListeners();
        });

        function initializeQuiz() {
            loadAllQuestions();
            updateScoreCounter();
            startTimer();
        }
        
        function setupEventListeners() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => handleNavClick(e, link, navLinks, sections, sidebar));
            });

            document.getElementById('livro-toggle').addEventListener('click', function(e){
                e.preventDefault();
                document.getElementById('livro-submenu').classList.toggle('open');
                document.getElementById('livro-menu-item').classList.toggle('open');
            });
            
            menuToggle.addEventListener('click', () => sidebar.classList.toggle('open'));
            
            document.getElementById('font-increase').addEventListener('click', () => changeFontSize(1));
            document.getElementById('font-decrease').addEventListener('click', () => changeFontSize(-1));
        }

        function handleNavClick(e, link, navLinks, sections, sidebar) {
            e.preventDefault();
            const sectionId = link.getAttribute('data-section');
            if (!sectionId) return;

            navLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');

            if (link.closest('.submenu')) {
                document.getElementById('livro-toggle').classList.add('active');
            } else if (link.id !== 'livro-toggle') {
                 document.getElementById('livro-toggle').classList.remove('active');
            }

            sections.forEach(section => section.classList.toggle('active', section.id === sectionId));
            
            if (window.innerWidth <= 1024) {
                sidebar.classList.remove('open');
            }
        }
        
        function loadAllQuestions() {
            for (const category in allQuestions) {
                if (category === 'ae') {
                    document.getElementById('quiz-container-ae').innerHTML = generateQuestionHTML(allQuestions.ae, 'ae');
                } else {
                    allQuestions.livro.forEach((unit, index) => {
                        const unitId = index + 1;
                        document.getElementById(`quiz-container-livro-${unitId}`).innerHTML = generateQuestionHTML(unit, `livro-${unitId}`);
                    });
                }
            }
        }

        function generateQuestionHTML(questions, prefix) {
            return questions.map((q, i) => {
                const qId = `${prefix}-${i}`;
                return `
                <div class="question-container" id="question-${qId}">
                    <div class="question"><strong>${i + 1}ª Questão</strong><br>${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, optIdx) => `
                            <label>
                                <input type="radio" name="answer-${qId}" value="${optIdx}" onchange="selectAnswer('${qId}')">
                                <span>${opt}</span>
                            </label>`).join('')}
                    </div>
                    <button id="submit-btn-${qId}" class="quiz-button" onclick="checkAnswer('${qId}')" disabled>Verificar Resposta</button>
                    <div class="feedback" id="feedback-${qId}" style="display: none;"></div>
                </div>`;
            }).join('');
        }
        
        function selectAnswer(questionId) {
            const radio = document.querySelector(`input[name="answer-${questionId}"]:checked`);
            if (radio) {
                selectedAnswers[questionId] = parseInt(radio.value, 10);
                document.getElementById(`submit-btn-${questionId}`).disabled = false;
            }
        }
        
        function checkAnswer(questionId) {
            const parts = questionId.split('-'); // "ae-0" or "livro-1-0"
            const prefix = parts[0];
            let questionData;

            if (prefix === 'ae') {
                const questionIndex = parseInt(parts[1], 10);
                questionData = allQuestions.ae[questionIndex];
            } else if (prefix === 'livro') {
                const unitIndex = parseInt(parts[1], 10) - 1; // unit 1 is index 0
                const questionIndex = parseInt(parts[2], 10);
                questionData = allQuestions.livro[unitIndex][questionIndex];
            }

            if (!questionData) return; // Exit if question data not found

            const userAnswer = selectedAnswers[questionId];
            if (userAnswer === undefined) return;

            const isCorrect = userAnswer === questionData.correct;
            const feedbackDiv = document.getElementById(`feedback-${questionId}`);
            
            if (isCorrect) {
                correctAnswers++;
                feedbackDiv.innerHTML = `<p class="correct-feedback"><strong>Correto!</strong> ${questionData.explanations.correct}</p>`;
                feedbackDiv.style.borderLeftColor = "var(--correct-color)";
            } else {
                feedbackDiv.innerHTML = `<p class="incorrect-feedback"><strong>Incorreto.</strong></p><p>${questionData.explanations.correct}</p>`;
                feedbackDiv.style.borderLeftColor = "var(--incorrect-color)";
            }
            
            if (!feedbackDiv.hasAttribute('data-answered')) {
                answeredQuestions++;
                feedbackDiv.setAttribute('data-answered', 'true');
            }
            
            updateScoreCounter();
            
            const labels = document.querySelectorAll(`#question-${questionId} .options label`);
            labels.forEach((label, i) => {
                if (i === questionData.correct) label.classList.add('correct');
                else if (i === userAnswer) label.classList.add('incorrect');
            });

            document.getElementById(`submit-btn-${questionId}`).style.display = 'none';
            feedbackDiv.style.display = 'block';
            
            document.querySelectorAll(`input[name="answer-${questionId}"]`).forEach(r => r.disabled = true);

            if (answeredQuestions === totalQuestions) {
                const scoreDiv = document.getElementById('final-score');
                scoreDiv.innerHTML = `🎉 Quiz finalizado! Você acertou <span>${correctAnswers} de ${totalQuestions}</span> questões. 🎉`;
                scoreDiv.style.display = 'block';
            }
        }

        // --- UI AND UTILITY FUNCTIONALITY ---
        let currentFontSize = 16;
        function changeFontSize(amount) {
            const minSize = 12;
            const maxSize = 20;
            const newSize = currentFontSize + amount;
            if (newSize >= minSize && newSize <= maxSize) {
                currentFontSize = newSize;
                document.documentElement.style.fontSize = `${currentFontSize}px`;
            }
        }

        function startTimer() {
            const timerElement = document.getElementById('timer');
            let seconds = 0;
            setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                timerElement.textContent = `Tempo: ${mins}:${secs}`;
            }, 1000);
        }

        function updateScoreCounter() {
            document.getElementById('score-counter').innerHTML = `✅ Acertos: ${correctAnswers} de ${totalQuestions}`;
        }
    </script>
</body>
</html>
